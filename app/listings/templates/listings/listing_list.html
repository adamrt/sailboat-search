{% extends "base.html" %}
{% load listings_tags %}
{% load widget_tweaks %}
{% load humanize %}

{% block extra_js %}
  <script>
   $(function() {
     $('#id_name').on('change', function(){
       this.form.submit();
     });
     $('#id_bluewater').on('change', function(){
       this.form.submit();
     });
   });
  </script>
{% endblock %}

{% block content %}

  <div class="container-fluid">
    <div class="row">
      <div class="col-2">
        <form id="filter-form" action="" method="get">
          <div class="form-group">
            {% render_field filter.form.name class="form-control" %}
          </div>
          <hr/>
          <div class="checkbox">
            <label style="margin-bottom:0">
              {% render_field filter.form.bluewater class="checkbox" %} Bluewater Only
            </label>
          </div>
          <hr/>
          <div class="form-group">
            <label>Decade</label>
            {% render_field filter.form.decade class="list-inline" %}
          </div>
          <hr/>
          <div class="form-group">
            <label>Max Price</label>
            {% render_field filter.form.price class="list-inline" %}
          </div>
          <hr/>
          <div class="form-group">
            <label>Length</label>
            {% render_field filter.form.length class="list-unstyled" %}
          </div>
        </form>
      </div>
      <div class="col-10">
        <div class="card">
          <div class="card-header">Boat Listings</div>
          <div class="card-block">
            <table class="table table-striped table-hover table-sm">
              <thead>
                <tr>
                  <th><a href="?{% url_replace request 'favorite' %}"><i class="fa fa-heart" aria-hidden="true"></i></a></th>
                  <th><a href="?{% url_replace request 'title' %}">Title</a></th>
                  <th><a href="?{% url_replace request 'boat__name' %}">Boat</a></th>
                  <th><a href="?{% url_replace request 'boat__length'  %}">Length</a></th>
                  <th><a href="?{% url_replace request 'year'  %}">Year</a></th>
                  <th><a href="?{% url_replace request 'price'  %}">Price</a></th>
                  <th><a href="?{% url_replace request 'location' %}">Location</a></th>
                  <th><a href="#">Listing</a></th>
                </tr>
              </thead>
              <tbody>
                {% for object in filter.qs %}
                  <tr>
                    <td><input type="checkbox"></input></td>
                    <td>{{ object.title }}</td>
                    <td>{{ object.boat.name }}</td>
                    <td>{{ object.boat.length|floatformat }}</td>
                    <td>{{ object.year }}</td>
                    <td>${{ object.price|intcomma}}</td>
                    <td>{{ object.location}}</td>
                    <td><a href="{{ object.url }}" target="_blank">{{ object.site_title }} <i class="fa fa-external-link" aria-hidden="true"></i></a></td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

{% endblock %}
